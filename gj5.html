<!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
     <style type="text/css">
         body, html {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
         #allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
     </style>
     <script src="https://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=A3CklGvnFOjkAzKzay2dySgfdig0GKz4&s=1"></script>
 
     <title>车辆运行轨迹测试</title>
     </head>
 <body>
 <input id="allmap_value" value="" style="display:none;">
 <div id="allmap"></div>
 </body>
 </html>
 <script type="text/javascript">
 $(function(){
 //初始化
 drawGreenAddress(0,"red",4);
 //show_mycat($("#allmap_value").val(),list[index].Long,list[index].Lat);
 })
 
     var timer;     //定时器
     var index = 0; //记录播放到第几个point
     var list = [
  {Long:110.293775,Lat:25.09606},
{Long:110.29467,Lat:25.09184},
{Long:110.29758,Lat:25.08879},
{Long:110.300427,Lat:25.085475},
{Long:110.301395,Lat:25.081527},
{Long:110.301802,Lat:25.077335},
{Long:110.301427,Lat:25.073},
{Long:110.302017,Lat:25.06878},
{Long:110.30323,Lat:25.06472},
{Long:110.304045,Lat:25.061415},
{Long:110.30412,Lat:25.061135},
{Long:110.304622,Lat:25.059465},
{Long:110.30533,Lat:25.057305},
{Long:110.30594,Lat:25.05571},
{Long:110.307167,Lat:25.052782},
{Long:110.308487,Lat:25.049645},
{Long:110.308667,Lat:25.04921},
{Long:110.309477,Lat:25.047295},
{Long:110.311085,Lat:25.044172},
{Long:110.31258,Lat:25.041895},
{Long:110.314635,Lat:25.039055},
{Long:110.317032,Lat:25.03555},
{Long:110.31894,Lat:25.03136},
{Long:110.32004,Lat:25.026832},
{Long:110.320892,Lat:25.02221},
{Long:110.321412,Lat:25.017847},
{Long:110.321585,Lat:25.015132},
{Long:110.321732,Lat:25.013825},
{Long:110.321967,Lat:25.010625},
{Long:110.323877,Lat:25.006502},
{Long:110.32664,Lat:25.002087},
{Long:110.329587,Lat:24.997395},
{Long:110.33245,Lat:24.992447},
{Long:110.335072,Lat:24.9873},
{Long:110.339375,Lat:24.983365},
{Long:110.34392,Lat:24.979632},
{Long:110.348267,Lat:24.976},
{Long:110.35291,Lat:24.972532},
{Long:110.35668,Lat:24.968412},
{Long:110.360032,Lat:24.96442},
{Long:110.363022,Lat:24.960435},
{Long:110.365817,Lat:24.956657},
{Long:110.367797,Lat:24.952242},
{Long:110.369505,Lat:24.94758},
{Long:110.371205,Lat:24.94292},
{Long:110.372955,Lat:24.938115},
{Long:110.374597,Lat:24.933652},
{Long:110.37622,Lat:24.929147},
{Long:110.378582,Lat:24.924815},
{Long:110.381295,Lat:24.920882},
{Long:110.382295,Lat:24.919447},
{Long:110.382295,Lat:24.919442},
{Long:110.38312,Lat:24.918225},
{Long:110.384907,Lat:24.915635},
{Long:110.387037,Lat:24.911865},
{Long:110.388652,Lat:24.907705},
{Long:110.390415,Lat:24.9032},
{Long:110.39224,Lat:24.898522},
{Long:110.393225,Lat:24.893717},
{Long:110.393417,Lat:24.88886},
{Long:110.39268,Lat:24.884072},
{Long:110.392045,Lat:24.87958},
{Long:110.3907,Lat:24.875215},
{Long:110.388932,Lat:24.870805},
{Long:110.389525,Lat:24.86561},
{Long:110.391097,Lat:24.860695},
{Long:110.392315,Lat:24.855735},
{Long:110.393547,Lat:24.850775},
{Long:110.395372,Lat:24.845972},
{Long:110.39935,Lat:24.843255},
{Long:110.402837,Lat:24.840275},
{Long:110.403622,Lat:24.835677},
{Long:110.404225,Lat:24.831175},
{Long:110.40483,Lat:24.826422},
{Long:110.40645,Lat:24.821697},
{Long:110.409782,Lat:24.818545},
{Long:110.41021,Lat:24.81815},
{Long:110.410762,Lat:24.81765},
{Long:110.412767,Lat:24.815807},
{Long:110.415665,Lat:24.813135},
{Long:110.41902,Lat:24.81031},
{Long:110.42356,Lat:24.808892},
{Long:110.428155,Lat:24.808565},
{Long:110.432825,Lat:24.80748},
{Long:110.437645,Lat:24.805595},
{Long:110.44195,Lat:24.803292},
{Long:110.44626,Lat:24.8006},
{Long:110.450657,Lat:24.797935},
{Long:110.45507,Lat:24.795477},
{Long:110.458735,Lat:24.792965},
{Long:110.46225,Lat:24.79054},
{Long:110.463667,Lat:24.786862},
{Long:110.466895,Lat:24.78449},
{Long:110.47117,Lat:24.783155},
{Long:110.474502,Lat:24.780605},
{Long:110.477705,Lat:24.77807},
{Long:110.477997,Lat:24.777665},
{Long:110.478075,Lat:24.777525},
{Long:110.478727,Lat:24.776305},
{Long:110.478852,Lat:24.77603},
{Long:110.478852,Lat:24.77603},
{Long:110.478905,Lat:24.776022},
{Long:110.479602,Lat:24.774675},
{Long:110.48062,Lat:24.77283},
{Long:110.482092,Lat:24.77094},
{Long:110.484125,Lat:24.769617},
{Long:110.487285,Lat:24.767967},
{Long:110.488835,Lat:24.76707},
{Long:110.488835,Lat:24.76707},
{Long:110.488835,Lat:24.76707},
{Long:110.488835,Lat:24.76707},
{Long:110.489105,Lat:24.766945},
{Long:110.491237,Lat:24.765975},
{Long:110.49412,Lat:24.76439},
{Long:110.49499,Lat:24.763912},
{Long:110.49611,Lat:24.764555},
{Long:110.49642,Lat:24.765325},
{Long:110.49642,Lat:24.765325},
{Long:110.499262,Lat:24.77303},
{Long:110.500312,Lat:24.775762},
{Long:110.50125,Lat:24.778272},
{Long:110.502082,Lat:24.78032},
{Long:110.504137,Lat:24.782055},
{Long:110.506977,Lat:24.78465},
{Long:110.510112,Lat:24.78624},
{Long:110.513937,Lat:24.785015},
{Long:110.517397,Lat:24.785062},
{Long:110.517632,Lat:24.785152},
{Long:110.52248,Lat:24.785647},
{Long:110.5259,Lat:24.785045},
{Long:110.529675,Lat:24.78439},
{Long:110.533262,Lat:24.783597},
{Long:110.537575,Lat:24.7847},
{Long:110.542075,Lat:24.785592},
{Long:110.546132,Lat:24.786582},
{Long:110.548805,Lat:24.788987},
{Long:110.55065,Lat:24.791077},
{Long:110.553725,Lat:24.79081},
{Long:110.553725,Lat:24.790807},
{Long:110.5545,Lat:24.79049},
{Long:110.556775,Lat:24.78899},
{Long:110.56,Lat:24.78672},
{Long:110.564742,Lat:24.786995},
{Long:110.569662,Lat:24.78724},
{Long:110.57461,Lat:24.786855},
{Long:110.579757,Lat:24.786125},
{Long:110.58492,Lat:24.786465},
{Long:110.589855,Lat:24.786377},
{Long:110.5951,Lat:24.7863},
{Long:110.599515,Lat:24.785142},
{Long:110.60349,Lat:24.78314},
{Long:110.60762,Lat:24.781982},
{Long:110.611797,Lat:24.781775},
{Long:110.61602,Lat:24.78191},
{Long:110.619857,Lat:24.77987},
{Long:110.623805,Lat:24.77808},
{Long:110.62795,Lat:24.776547},
{Long:110.632082,Lat:24.775955},
{Long:110.63635,Lat:24.774872},
{Long:110.640535,Lat:24.774645},
{Long:110.644362,Lat:24.774072},
{Long:110.648005,Lat:24.7734},
{Long:110.652232,Lat:24.772655},
{Long:110.656297,Lat:24.771915},
{Long:110.66041,Lat:24.771602},
{Long:110.66427,Lat:24.772105},
{Long:110.668117,Lat:24.772565},
{Long:110.671795,Lat:24.771815},
{Long:110.675577,Lat:24.771565},
{Long:110.679567,Lat:24.77121},
{Long:110.683447,Lat:24.77184},
{Long:110.68708,Lat:24.773357},
{Long:110.693635,Lat:24.77653},
{Long:110.696175,Lat:24.778522},
{Long:110.697825,Lat:24.778465},
{Long:110.700095,Lat:24.777295},
{Long:110.70384,Lat:24.775142},
{Long:110.705747,Lat:24.77243},
{Long:110.707985,Lat:24.769825},
{Long:110.71206,Lat:24.767825},
{Long:110.716422,Lat:24.76655},
{Long:110.720597,Lat:24.765767},
{Long:110.725625,Lat:24.765012},
{Long:110.72975,Lat:24.762875},
{Long:110.733412,Lat:24.76048},
{Long:110.733412,Lat:24.76048},
{Long:110.73612,Lat:24.757255},
{Long:110.73872,Lat:24.75404},
{Long:110.742522,Lat:24.748765},
{Long:110.744022,Lat:24.74404},
{Long:110.746287,Lat:24.740942},
{Long:110.747252,Lat:24.737795},
{Long:110.74748,Lat:24.733605},
{Long:110.748875,Lat:24.73013},
{Long:110.75111,Lat:24.727012},
{Long:110.753722,Lat:24.723905},
{Long:110.755122,Lat:24.71999},
{Long:110.757405,Lat:24.716765},
{Long:110.759505,Lat:24.71383},
{Long:110.761415,Lat:24.71059},
{Long:110.764892,Lat:24.70752},
{Long:110.76876,Lat:24.705232},
{Long:110.7705,Lat:24.70163},
{Long:110.77085,Lat:24.697755},
{Long:110.77007,Lat:24.693797},
{Long:110.771192,Lat:24.690297},
{Long:110.77271,Lat:24.686542},
{Long:110.77375,Lat:24.68358},
{Long:110.775335,Lat:24.680565},
{Long:110.7756,Lat:24.676995},
{Long:110.77556,Lat:24.675975},
{Long:110.775775,Lat:24.67371},
{Long:110.77578,Lat:24.67369},
{Long:110.77578,Lat:24.67369},
{Long:110.77578,Lat:24.67369},
{Long:110.77587,Lat:24.67319},
{Long:110.775895,Lat:24.673055},
{Long:110.776135,Lat:24.671485},
{Long:110.77676,Lat:24.668575},
{Long:110.778162,Lat:24.666165},
{Long:110.779612,Lat:24.663845},
{Long:110.781635,Lat:24.661575},
{Long:110.783572,Lat:24.65969},
{Long:110.786635,Lat:24.65982},
{Long:110.790622,Lat:24.65942},
{Long:110.794682,Lat:24.658905},
{Long:110.799065,Lat:24.658387},
{Long:110.80335,Lat:24.657757},
{Long:110.807782,Lat:24.657147},
{Long:110.81289,Lat:24.657215},
{Long:110.81791,Lat:24.65649},
{Long:110.822232,Lat:24.654567},
{Long:110.826847,Lat:24.652992},
{Long:110.829605,Lat:24.649625},
{Long:110.832452,Lat:24.646087},
{Long:110.834,Lat:24.642125},
{Long:110.83563,Lat:24.63819},
{Long:110.838085,Lat:24.634665},
{Long:110.84064,Lat:24.631155},
{Long:110.843077,Lat:24.6281},
{Long:110.845415,Lat:24.624995},
{Long:110.84757,Lat:24.621545},
{Long:110.850412,Lat:24.619545},
{Long:110.854205,Lat:24.619322},
{Long:110.858042,Lat:24.617425},
{Long:110.86234,Lat:24.61686},
{Long:110.866157,Lat:24.618267},
{Long:110.869072,Lat:24.62042},
{Long:110.87154,Lat:24.617845},
{Long:110.875125,Lat:24.617177},
{Long:110.879117,Lat:24.61861},
{Long:110.883017,Lat:24.619695},
{Long:110.886945,Lat:24.618455},
{Long:110.89083,Lat:24.618345},
{Long:110.89503,Lat:24.61654},
{Long:110.899055,Lat:24.61369},
{Long:110.902517,Lat:24.61049},
{Long:110.904632,Lat:24.60647},
{Long:110.907325,Lat:24.60255},
{Long:110.91087,Lat:24.600085},
{Long:110.911925,Lat:24.596035},
{Long:110.91298,Lat:24.59319},
{Long:110.912047,Lat:24.593122},
{Long:110.9116,Lat:24.593125},
{Long:110.910095,Lat:24.59311},
{Long:110.908002,Lat:24.593105},
{Long:110.905817,Lat:24.59411},
{Long:110.907972,Lat:24.59236},
{Long:110.910092,Lat:24.588475},
{Long:110.912062,Lat:24.583967},
{Long:110.913817,Lat:24.5792},
{Long:110.917005,Lat:24.575137},
{Long:110.921405,Lat:24.571972},
{Long:110.925992,Lat:24.568797},
{Long:110.931302,Lat:24.566402},
{Long:110.93778,Lat:24.566055},
{Long:110.94452,Lat:24.566147},
{Long:110.95091,Lat:24.56592},
{Long:110.95657,Lat:24.563375},
{Long:110.961077,Lat:24.559825},
{Long:110.965645,Lat:24.55622},
{Long:110.970552,Lat:24.552242},
{Long:110.975512,Lat:24.54828},
{Long:110.980507,Lat:24.544327},
{Long:110.985692,Lat:24.540382},
{Long:110.9919,Lat:24.53818},
{Long:110.99817,Lat:24.53691},
{Long:111.003252,Lat:24.5342},
{Long:111.005625,Lat:24.529732},
{Long:111.00724,Lat:24.52541},
{Long:111.010215,Lat:24.521607},
{Long:111.01388,Lat:24.518395},
{Long:111.017895,Lat:24.51669},
{Long:111.020997,Lat:24.51678},
{Long:111.020997,Lat:24.51678},
{Long:111.020997,Lat:24.51678},
{Long:111.020997,Lat:24.51678},
{Long:111.037917,Lat:24.523022},
{Long:111.043097,Lat:24.51935},
{Long:111.04781,Lat:24.51574},
{Long:111.05321,Lat:24.512512},
{Long:111.05725,Lat:24.507212},
{Long:111.060967,Lat:24.501747},
{Long:111.066402,Lat:24.497785},
{Long:111.071922,Lat:24.494655},
{Long:111.077287,Lat:24.491585},
{Long:111.08296,Lat:24.488255},
{Long:111.086132,Lat:24.482787},
{Long:111.08434,Lat:24.476805},
{Long:111.083085,Lat:24.470502},
{Long:111.08653,Lat:24.465135},
{Long:111.09163,Lat:24.460827},
{Long:111.096872,Lat:24.456302},
{Long:111.10145,Lat:24.451575},
{Long:111.10578,Lat:24.446922},
{Long:111.109515,Lat:24.441745},
{Long:111.11221,Lat:24.43625},
{Long:111.116532,Lat:24.43174},
{Long:111.122545,Lat:24.429105},
{Long:111.128325,Lat:24.427502},
{Long:111.13009,Lat:24.426057},
{Long:111.135045,Lat:24.419612},
{Long:111.139862,Lat:24.417112},
{Long:111.146077,Lat:24.417402},
{Long:111.15293,Lat:24.41823},
{Long:111.15978,Lat:24.4189},
{Long:111.166355,Lat:24.41828},
{Long:111.16984,Lat:24.413075},
{Long:111.171547,Lat:24.40712},
{Long:111.17366,Lat:24.401465},
{Long:111.17822,Lat:24.397485},
{Long:111.1837,Lat:24.394617},
{Long:111.188795,Lat:24.391197},
{Long:111.193762,Lat:24.388075},
{Long:111.198435,Lat:24.385342},
{Long:111.201245,Lat:24.383467},
{Long:111.204295,Lat:24.386105},
{Long:111.20859,Lat:24.388402},
{Long:111.21364,Lat:24.38984},
{Long:111.219215,Lat:24.390475},
{Long:111.224655,Lat:24.391075},
{Long:111.229862,Lat:24.39163},
{Long:111.23441,Lat:24.392877},
{Long:111.237875,Lat:24.39457},
{Long:111.241075,Lat:24.396182},
{Long:111.245027,Lat:24.398065},
{Long:111.25073,Lat:24.40008},
{Long:111.2571,Lat:24.401312},
{Long:111.26362,Lat:24.401755},
{Long:111.269965,Lat:24.401545},
{Long:111.276445,Lat:24.40138},
{Long:111.283112,Lat:24.40116},
{Long:111.289262,Lat:24.400827},
{Long:111.295112,Lat:24.39973},
{Long:111.30082,Lat:24.398227},
{Long:111.306325,Lat:24.396632},
{Long:111.311585,Lat:24.3941},
{Long:111.316685,Lat:24.391097},
{Long:111.322205,Lat:24.388587},
{Long:111.327865,Lat:24.386517},
{Long:111.33343,Lat:24.38446},
{Long:111.3388,Lat:24.38249}

 ];
     var listLast = list.length-1;
     // 百度地图API功能
     var map = new BMap.Map("allmap");    // 创建Map实例
     map.addControl(new BMap.NavigationControl());
     map.addControl(new BMap.ScaleControl());
     map.addControl(new BMap.OverviewMapControl({isOpen: true}));
     map.centerAndZoom(new BMap.Point(list[0].Long,list[0].Lat), 15);  // 初始化地图,设置中心点坐标和地图级别
     map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
     map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
 
     setTimeout(drawIcon,500);
     setTimeout(play,500);
     var carMk;
     var myBeginIcon = new BMap.Icon("https://canonconan.github.io/huaren/%E8%B5%B7%E7%82%B9.png", new BMap.Size(25,37), {imageOffset: new BMap.Size(0, 0)});//人
     var myEndIcon = new BMap.Icon("https://canonconan.github.io/huaren/%E7%BB%88%E7%82%B9.png", new BMap.Size(25,37), {imageOffset: new BMap.Size(0, 0)});//人
 
     //show_mycat("这里是地址",106.652024,26.617221);
     //展示bd地址
     var car = "";
     function show_mycat(address,long,lat){
 
         if(car) map.removeOverlay(car)
         label = new BMap.Label(address, {offset: new BMap.Size(-20, -20)});
         car = new BMap.Marker(new BMap.Point(long,lat));
         car.setLabel(label);
         map.addOverlay(car);
         map.panTo(new BMap.Point(long, lat));
 
     }    
 
     //显示原始路线
     function drawGreenLine(i,color,weitht){
 
         var polyline = new BMap.Polyline([
             new BMap.Point(list[i].Long,list[i].Lat),//起始点的经纬度
             new BMap.Point(list[i+1].Long,list[i+1].Lat)//终点的经纬度
         ], {strokeColor:color,//设置颜色
             strokeWeight:weitht, //宽度
             strokeOpacity:1});//透明度
         map.addOverlay(polyline);
 
     }
 
     //获取路线
      function drawGreenAddress(i,color,weitht){
 
         if(i%2==0){ //不能太频繁请求百度地址,这里可能会改大
             var geoc = new BMap.Geocoder();
             geoc.getLocation(new BMap.Point(list[i].Long,list[i].Lat),function(rs){
             var addComp = rs.addressComponents;
             address =  addComp.province + addComp.city  + addComp.district + addComp.street  + addComp.streetNumber;
             $("#allmap_value").val(address)
             });
         }
     }
 
     function lineAddress(i,color,weitht){
         drawGreenLine(i,color,weitht)
         drawGreenAddress(i,color,weitht)
     }
 
     function drawIcon(){
         if(carMk){
             map.removeOverlay(carMk);
         }
         carMk2 = new BMap.Marker(
                 new BMap.Point(list[0].Long,list[0].Lat),//起始点的经纬度
                 {icon:myBeginIcon});
         map.addOverlay(carMk2);
 
         carMk = new BMap.Marker(
                 new BMap.Point(list[listLast].Long,list[listLast].Lat),//终点的经纬度
                 {icon:myEndIcon});
         map.addOverlay(carMk);
 
         for(var i=0;i<list.length-1;i++){
 
             drawGreenLine(i,"green",4);
         }
 
     }
 

     //停止
 function stop() {
 
     if(timer) {
         window.clearTimeout(timer);
     }
 }
 //运行地图轨迹
     function play(){
      if(index < listLast){
         lineAddress(index,"red",2);
         //显示地址
         show_mycat($("#allmap_value").val(),list[index+1].Long,list[index+1].Lat);
 
         timer  = window.setTimeout("play(" + index + ",'red',2)", 500);
         index++;
 
      }
 
     }

 </script>